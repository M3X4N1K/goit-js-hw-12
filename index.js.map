{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import { getImagesByQuery } from './js/pixabay-api';\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    showEndMessage,\n    hideEndMessage\n} from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// DOM elements\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n// Application state\nlet currentQuery = '';\nlet currentPage = 1;\nlet totalHits = 0;\nlet isLoading = false;\n\n// Event listeners\nsearchForm.addEventListener('submit', onSearchFormSubmit);\nloadMoreBtn.addEventListener('click', onLoadMoreClick);\n\n// Search form submit handler\nasync function onSearchFormSubmit(event) {\n    event.preventDefault();\n\n    const query = searchInput.value.trim();\n    \n    if (!query) {\n        showToast('Please enter a search query!', 'warning');\n        return;\n    }\n\n    // Reset for new search\n    currentQuery = query;\n    currentPage = 1;\n    clearGallery();\n    hideLoadMoreButton();\n    hideEndMessage();\n\n    await searchImages();\n}\n\n// Load more button click handler\nasync function onLoadMoreClick() {\n    currentPage += 1;\n    await searchImages();\n}\n\n// Main search function\nasync function searchImages() {\n    if (isLoading) return;\n\n    isLoading = true;\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(currentQuery, currentPage);\n        totalHits = data.totalHits;\n\n        hideLoader();\n\n        if (data.hits.length === 0) {\n            if (currentPage === 1) {\n                showToast('Sorry, there are no images matching your search query. Please try again!', 'error');\n            }\n            return;\n        }\n\n        createGallery(data.hits);\n\n        if (currentPage === 1) {\n            showToast(`Hooray! We found ${totalHits} images.`, 'success');\n        }\n\n        // Check if we've loaded all available images\n        const loadedImages = currentPage * 15;\n        if (loadedImages >= totalHits) {\n            hideLoadMoreButton();\n            showEndMessage();\n        } else {\n            showLoadMoreButton();\n        }\n\n        // Smooth scroll after loading more images (except first page)\n        if (currentPage > 1) {\n            smoothScroll();\n        }\n\n    } catch (error) {\n        hideLoader();\n        console.error('Search error:', error);\n        showToast('Something went wrong. Please try again later.', 'error');\n    } finally {\n        isLoading = false;\n    }\n}\n\n// Smooth scroll function\nfunction smoothScroll() {\n    const galleryItem = document.querySelector('.gallery-item');\n    if (galleryItem) {\n        const cardHeight = galleryItem.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}\n\n// Toast notification function\nfunction showToast(message, type = 'info') {\n    const config = {\n        title: '',\n        message: message,\n        position: 'topRight',\n        timeout: 5000,\n        closeOnClick: true,\n        pauseOnHover: true,\n        resetOnHover: true,\n        progressBar: true,\n        transitionIn: 'fadeInLeft',\n        transitionOut: 'fadeOutRight'\n    };\n\n    switch (type) {\n        case 'success':\n            iziToast.success({\n                ...config,\n                backgroundColor: '#51cf66',\n                iconColor: '#fff'\n            });\n            break;\n        case 'error':\n            iziToast.error({\n                ...config,\n                backgroundColor: '#ff6b6b',\n                iconColor: '#fff'\n            });\n            break;\n        case 'warning':\n            iziToast.warning({\n                ...config,\n                backgroundColor: '#ffa500',\n                iconColor: '#fff'\n            });\n            break;\n        default:\n            iziToast.info({\n                ...config,\n                backgroundColor: '#667eea',\n                iconColor: '#fff'\n            });\n    }\n}"],"names":["searchForm","searchInput","loadMoreBtn","currentQuery","currentPage","totalHits","isLoading","onSearchFormSubmit","onLoadMoreClick","event","query","showToast","clearGallery","hideLoadMoreButton","hideEndMessage","searchImages","showLoader","data","getImagesByQuery","hideLoader","createGallery","showEndMessage","showLoadMoreButton","smoothScroll","error","galleryItem","cardHeight","message","type","config","iziToast"],"mappings":"oPAeA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAc,SAAS,cAAc,eAAe,EACpDC,EAAc,SAAS,cAAc,YAAY,EAGvD,IAAIC,EAAe,GACfC,EAAc,EACdC,EAAY,EACZC,EAAY,GAGhBN,EAAW,iBAAiB,SAAUO,CAAkB,EACxDL,EAAY,iBAAiB,QAASM,CAAe,EAGrD,eAAeD,EAAmBE,EAAO,CACrCA,EAAM,eAAc,EAEpB,MAAMC,EAAQT,EAAY,MAAM,KAAI,EAEpC,GAAI,CAACS,EAAO,CACRC,EAAU,+BAAgC,SAAS,EACnD,MACH,CAGDR,EAAeO,EACfN,EAAc,EACdQ,IACAC,IACAC,IAEA,MAAMC,EAAY,CACtB,CAGA,eAAeP,GAAkB,CAC7BJ,GAAe,EACf,MAAMW,EAAY,CACtB,CAGA,eAAeA,GAAe,CAC1B,GAAI,CAAAT,EAEJ,CAAAA,EAAY,GACZU,IAEA,GAAI,CACA,MAAMC,EAAO,MAAMC,EAAiBf,EAAcC,CAAW,EAK7D,GAJAC,EAAYY,EAAK,UAEjBE,IAEIF,EAAK,KAAK,SAAW,EAAG,CACpBb,IAAgB,GAChBO,EAAU,2EAA4E,OAAO,EAEjG,MACH,CAEDS,EAAcH,EAAK,IAAI,EAEnBb,IAAgB,GAChBO,EAAU,oBAAoBN,CAAS,WAAY,SAAS,EAI3CD,EAAc,IACfC,GAChBQ,IACAQ,KAEAC,IAIAlB,EAAc,GACdmB,GAGP,OAAQC,EAAO,CACZL,IACA,QAAQ,MAAM,gBAAiBK,CAAK,EACpCb,EAAU,gDAAiD,OAAO,CAC1E,QAAc,CACNL,EAAY,EACf,EACL,CAGA,SAASiB,GAAe,CACpB,MAAME,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACb,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,CACL,CAGA,SAASf,EAAUgB,EAASC,EAAO,OAAQ,CACvC,MAAMC,EAAS,CACX,MAAO,GACP,QAASF,EACT,SAAU,WACV,QAAS,IACT,aAAc,GACd,aAAc,GACd,aAAc,GACd,YAAa,GACb,aAAc,aACd,cAAe,cACvB,EAEI,OAAQC,EAAI,CACR,IAAK,UACDE,EAAS,QAAQ,CACb,GAAGD,EACH,gBAAiB,UACjB,UAAW,MAC3B,CAAa,EACD,MACJ,IAAK,QACDC,EAAS,MAAM,CACX,GAAGD,EACH,gBAAiB,UACjB,UAAW,MAC3B,CAAa,EACD,MACJ,IAAK,UACDC,EAAS,QAAQ,CACb,GAAGD,EACH,gBAAiB,UACjB,UAAW,MAC3B,CAAa,EACD,MACJ,QACIC,EAAS,KAAK,CACV,GAAGD,EACH,gBAAiB,UACjB,UAAW,MAC3B,CAAa,CACR,CACL"}